window.CF={},CF.immediate=function(){"use strict";return{init:{init:function(){document.querySelector("html").classList.add("js")}}.init}}(CF),CF.immediate.init();
CF.global=function(){"use strict";var e={init:function(){var n,t,i=document.querySelector("body"),s=0,o=0,c=document.querySelector("body > header"),a=c.querySelector("nav ul.account");window.location.hash.length&&(i.classList.add("hidden-header"),o=1e3),setTimeout((function(){window.addEventListener("scroll",(function(){!i.classList.contains("hidden-header")&&s>i.getBoundingClientRect().top&&Math.abs(i.getBoundingClientRect().top)>c.getBoundingClientRect().height?i.classList.add("hidden-header"):(i.getBoundingClientRect().top-10>=s||Math.abs(i.getBoundingClientRect().top)<=c.getBoundingClientRect().height)&&i.classList.remove("hidden-header"),s=i.getBoundingClientRect().top}))}),o),(t=document.createElement("div")).setAttribute("id","main-menu-icon"),t.innerHTML='<svg class="icon menu"><use xlink:href="themes/comitium-light/images/symbols.svg#icon-menu"></use></svg>',t.appendChild(document.createTextNode("Menu")),c.insertBefore(t,c.querySelector("a.home")),e.menu({menu:"header nav",trigger:"#main-menu-icon",position:"left"}),document.body.clientWidth>=600&&(a.addEventListener("mouseleave",(function(){n=setTimeout((function(){a.classList.remove("active")}),500)}),!1),a.addEventListener("mouseover",(function(){n&&clearTimeout(n)})),c.classList.contains("authenticated")&&(c.querySelector("a.account").addEventListener("click",(function(e){document.body.clientWidth>=600&&e.preventDefault(),a.classList.contains("active")?a.classList.remove("active"):a.classList.add("active")})),window.addEventListener("scroll",(function(){a.classList.contains("active")&&a.classList.remove("active")}))))},collapseQuotes:function(){for(var e=document.body.querySelectorAll("section.content > blockquote"),n=function(e){var n=document.createElement("a");n.setAttribute("href","#"),n.classList.add("expand"),n.innerHTML="Expand",n.addEventListener("click",(function(t){t.preventDefault(),e.classList.toggle("expanded"),"Expand"===n.innerHTML?n.innerHTML="Collapse":n.innerHTML="Expand"})),e.classList.add("nested"),e.appendChild(n)},t=0;t<e.length;t++)e[t].querySelector("blockquote")&&n(e[t])},menu:function(e){var n,t=document.querySelector("body");document.querySelector(e.trigger).addEventListener("click",(function(){var i=document.querySelector(e.menu),s=document.createElement("div");n=i.cloneNode(!0),t.appendChild(n),s.className="menu-shadow",t.appendChild(s),!1===e.keepClass?n.className="slide-menu "+e.position:n.className+=" slide-menu "+e.position,t.classList.contains("menu-open")?(t.classList.remove("menu-open"),n.classList.remove("open"),t.classList.add("menu-closing"),setTimeout((function(){t.classList.remove("menu-closing")}),200)):(t.classList.add("menu-opening"),setTimeout((function(){t.classList.remove("menu-opening"),t.classList.add("menu-open"),n.classList.add("open")}),200)),s.addEventListener("click",(function(){t.classList.remove("menu-open"),n.classList.remove("open"),t.classList.add("menu-closing"),setTimeout((function(){t.classList.remove("menu-closing"),t.removeChild(s),null!==n.parentNode&&t.removeChild(n)}),200)}),!1)}),!1)}};return{collapseQuotes:e.collapseQuotes,init:e.init,menu:e.menu}}(CF);
CF.init=function(){"use strict";var t=document.getElementsByTagName("body")[0],e=t.getAttribute("data-controller"),i=t.getAttribute("data-action"),n=t.getAttribute("data-view");CF.global.init(),CF[e]&&(CF[e].init(),CF[e][i]&&"function"==typeof CF[e][i]&&(CF[e][i](),CF[e][i][n]&&CF[e][i][n]()))},document.onreadystatechange=function(){"use strict";"interactive"===document.readyState&&CF.init()};
CF.members=function(){"use strict";return{init:{init:function(){if(document.body.clientWidth<720){let e=document.querySelector("#group-menu li.current a");e&&e.addEventListener("click",(function(e){e.preventDefault(),e.target.parentNode.parentNode.classList.toggle("show-menu")}))}}}.init}}(CF);
CF.post=function(){"use strict";var t={init:function(){CF.global.collapseQuotes()},topic:function(){CF.topic.handler()}};return{init:t.init,topic:t.topic}}(CF);
CF.topic=function(){"use strict";var e,t;return e={handler:function(){var e=document.querySelector("#quick-reply-form");e&&!e.parentNode.classList.contains("quote")&&t.postContent(),t.imageZoom()},start:function(){t.imageZoom(),t.postContent()},startForm:function(){t.imageZoom()},reply:function(){var e=document.querySelector("#topic-reply-form");e&&!e.parentNode.classList.contains("quote")&&t.postContent(),t.imageZoom()},replyForm:function(){t.imageZoom()}},{init:(t={init:function(){CF.global.collapseQuotes()},imageZoom:function(){if(document.body.clientWidth>=720){var e=document.createElement("div");e.setAttribute("id","mask"),document.body.appendChild(e),document.querySelectorAll("article.post section.content.post p > img, article.post section.content.post > img").forEach((function(t){var n=document.createElement("span"),o=document.createElement("span"),s=t.parentNode,i=t.getAttribute("src");n.classList.add("zoom"),s.appendChild(n),o.classList.add("zoom-button"),o.innerHTML='<svg class="icon zoom-in"><use xlink:href="themes/comitium-light/images/symbols.svg#icon-zoom-in"></use></svg>',n.appendChild(t),n.appendChild(o),n.addEventListener("click",(function(){function t(e){"Escape"===e.key&&n()}function n(){document.querySelector("html").classList.remove("mask-enabled"),e.classList.remove("enabled"),e.innerHTML="",window.removeEventListener("keydown",t)}e.innerHTML='<div id="mask-close"><svg class="icon close"><use xlink:href="themes/comitium-light/images/symbols.svg#icon-close"></use></svg></div><img src="'+i+'"><a class="open-tab" href="'+i+'" target="_blank">'+i+'<svg class="icon arrow-up-right"><use xlink:href="themes/comitium-light/images/symbols.svg#icon-arrow-up-right"></use></svg></a>',document.querySelector("html").classList.add("mask-enabled"),e.classList.add("enabled"),window.addEventListener("keydown",t),e.querySelector("#mask-close").addEventListener("click",(function(){n()}))}))}))}},postContent:function(){var e=document.getElementById("post-content"),t=e?e.value:"";e&&(e.addEventListener("focus",(function(){e.value===t&&(e.value="")})),e.addEventListener("blur",(function(){""===e.value&&(e.value=t)})))}}).init,handler:e.handler,start:e.start,startForm:e.startForm,startPrivate:e.start,startPrivateForm:e.startForm,startAnnouncement:e.start,startAnnouncementForm:e.startForm,reply:e.reply,replyForm:e.replyForm}}(CF),CF.announcement=CF.topic;
CF.user=function(){"use strict";return{init:{init:function(){CF.global.collapseQuotes()}}.init}}(CF);
//# sourceMappingURL=site.js.map
