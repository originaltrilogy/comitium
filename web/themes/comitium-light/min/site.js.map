{"version":3,"sources":["immediate.js","global.js","init.js","members.js","post.js","topic.js","user.js"],"names":["window","CF","immediate","init","document","querySelector","classList","add","global","methods","accountNavTimer","menuIcon","body","bodyOffset","timer","header","accountNav","location","hash","length","setTimeout","addEventListener","contains","getBoundingClientRect","top","Math","abs","height","remove","createElement","setAttribute","innerHTML","appendChild","createTextNode","insertBefore","menu","trigger","position","clientWidth","clearTimeout","e","preventDefault","collapseQuotes","quotes","querySelectorAll","bindButton","quote","expandButton","toggle","i","args","source","menuShadow","cloneNode","className","keepClass","removeChild","parentNode","getElementsByTagName","controller","getAttribute","action","view","onreadystatechange","readyState","members","currentGroup","target","post","topic","handler","actions","form","postContent","imageZoom","start","startForm","reply","replyForm","mask","forEach","item","zoomWrapper","zoomButton","parent","src","escape","key","close","removeEventListener","getElementById","postContentText","value","startPrivate","startPrivateForm","startAnnouncement","startAnnouncementForm","announcement","user"],"mappings":"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","file":"site.js","sourcesContent":["window.CF = {}\n\nCF.immediate = ( function () {\n  'use strict'\n\n  var methods = {\n    init: function () {\n      document.querySelector('html').classList.add('js')\n    }\n  }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(CF)\n\nCF.immediate.init()\n","CF.global = ( function () {\n  'use strict'\n  var methods = {\n\n    init: function () {\n      var body = document.querySelector('body'),\n          bodyOffset = 0,\n          timer = 0,\n          header = document.querySelector('body > header'),\n          accountNav = header.querySelector('nav ul.account'),\n          accountNavTimer,\n          menuIcon\n\n      // If the URL contains an intra-page anchor (hash) that takes them directly to a specific post, delay the onset of the scroll listener so the header doesn't pop in\n      if ( window.location.hash.length ) {\n        body.classList.add('hidden-header')\n        timer = 1000\n      }\n      setTimeout( function () {\n        window.addEventListener('scroll', function () {\n          if ( !body.classList.contains('hidden-header') && bodyOffset > body.getBoundingClientRect().top && Math.abs(body.getBoundingClientRect().top) > header.getBoundingClientRect().height ) {\n            body.classList.add('hidden-header')\n          // The minus 10 pixels is to keep the header from popping in with only slight movements (happens frequently when using touchscreens and touch input devices)\n          // The second half of the statement deals with Safari's bounceback when you scroll past the top of the page\n          } else if ( body.getBoundingClientRect().top - 10 >= bodyOffset || Math.abs(body.getBoundingClientRect().top) <= header.getBoundingClientRect().height ) {\n            body.classList.remove('hidden-header')\n          }\n\n          bodyOffset = body.getBoundingClientRect().top\n        })\n      }, timer)\n      \n      // Create the main menu icon\n      menuIcon = document.createElement('div')\n\n      menuIcon.setAttribute('id', 'main-menu-icon')\n      menuIcon.innerHTML = '<svg class=\"icon menu\"><use xlink:href=\"themes/comitium-light/images/symbols.svg#icon-menu\"></use></svg>'\n      menuIcon.appendChild(document.createTextNode('Menu'))\n      header.insertBefore(menuIcon, header.querySelector('a.home'))\n\n      methods.menu({\n        menu: 'header nav',\n        trigger: '#main-menu-icon',\n        position: 'left'\n      })\n\n      if ( document.body.clientWidth >= 600 ) {\n        accountNav.addEventListener('mouseleave', function () {\n          accountNavTimer = setTimeout( function () {\n            accountNav.classList.remove('active')\n          }, 500)\n        }, false)\n\n        accountNav.addEventListener('mouseover', function () {\n          if ( accountNavTimer ) {\n            clearTimeout(accountNavTimer)\n          }\n        })\n\n        if ( header.classList.contains('authenticated') ) {\n          header.querySelector('a.account').addEventListener('click', function (e) {\n            if ( document.body.clientWidth >= 600 ) { // Just in case they resized the window\n              e.preventDefault()\n            }\n            if ( accountNav.classList.contains('active') ) {\n              accountNav.classList.remove('active')\n            } else {\n              accountNav.classList.add('active')\n            }\n          })\n\n          window.addEventListener('scroll', function () {\n            if ( accountNav.classList.contains('active') ) {\n              accountNav.classList.remove('active')\n            }\n          })\n        }\n      }\n    },\n\n    collapseQuotes: function () {\n      var quotes = document.body.querySelectorAll('section.content > blockquote'),\n          bindButton = function (quote) {\n            var expandButton = document.createElement('a')\n\n            expandButton.setAttribute('href', '#')\n            expandButton.classList.add('expand')\n            expandButton.innerHTML = 'Expand'\n            expandButton.addEventListener('click', function (e) {\n              e.preventDefault()\n              quote.classList.toggle('expanded')\n              if ( expandButton.innerHTML === 'Expand' ) {\n                expandButton.innerHTML = 'Collapse'\n              } else {\n                expandButton.innerHTML = 'Expand'\n              }\n            })\n            quote.classList.add('nested')\n            quote.appendChild(expandButton)\n          }\n\n      for ( var i = 0; i < quotes.length; i++ ) {\n        if ( quotes[i].querySelector('blockquote') ) {\n          bindButton(quotes[i])\n        }\n      }\n    },\n\n    menu: function (args) {\n      var body = document.querySelector('body'),\n          menu,\n          trigger = document.querySelector(args.trigger)\n\n      trigger.addEventListener('click', function () {\n        var source = document.querySelector(args.menu),\n            menuShadow = document.createElement('div')\n\n        menu = source.cloneNode(true)\n        body.appendChild(menu)\n        menuShadow.className = 'menu-shadow'\n        body.appendChild(menuShadow)\n\n        if ( args.keepClass === false ) {\n          menu.className = 'slide-menu ' + args.position\n        } else {\n          menu.className += ' slide-menu ' + args.position\n        }\n\n        if ( body.classList.contains('menu-open') ) {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n          }, 200)\n        } else {\n          body.classList.add('menu-opening')\n          setTimeout( function () {\n            body.classList.remove('menu-opening')\n            body.classList.add('menu-open')\n            menu.classList.add('open')\n          }, 200)\n        }\n\n        menuShadow.addEventListener('click', function () {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n            body.removeChild(menuShadow)\n            if ( menu.parentNode !== null ) {\n              body.removeChild(menu)\n            }\n          }, 200)\n        }, false)\n      }, false)\n    },\n\n    // ajaxFormBinding: function(options) {\n    //   var form = document.querySelector(options.formSelector),\n    //       format = options.format || 'json',\n    //       type = options.type || 'direct'\n\n    //   form.addEventListener('submit', function (e) {\n    //     var request = new XMLHttpRequest(),\n    //         formData = new FormData(form),\n    //         data\n\n    //     e.preventDefault()\n\n    //     request.open('POST', form.action + '/format/' + format + '/type/' + type, true)\n    //     request.setRequestHeader('X-Requested-With', 'XMLHttpRequest')\n    //     // request.setRequestHeader('Content-Type', 'application/json')\n    //     request.send(formData)\n\n    //     request.onreadystatechange = function () {\n    //       console.log('readyState: ' + request.readyState)\n    //       console.log('status: ' + request.status)\n    //     }\n\n    //     request.onload = function () {\n    //       if ( request.status >= 200 && request.status < 400 ) {\n    //         data = JSON.parse(request.responseText)\n    //         console.log(data)\n    //       } else {\n    //         // We reached our target server, but it returned an error\n    //       }\n    //     }\n\n    //     request.onerror = function () {\n    //       // There was a connection error of some sort\n    //     }\n    //   })\n\n    //   // Some browsers don't include the submit button's value when form.submit() is\n    //   // called. This function creates a click listener that duplicates a form's submit\n    //   // button as a hidden field so its name/value can be included in AJAX POSTs,\n    //   // allowing different processing based on different submit buttons.\n    //   form.addEventListener('click', function (e) {\n    //     var input = document.createElement('input'),\n    //         previousActions = form.querySelectorAll('input[type=\"hidden\"].submit-surrogate')\n\n    //     for ( var i = 0; i < previousActions.length; i++ ) {\n    //       form.removeChild(previousActions[i])\n    //     }\n\n    //     if ( e.target.type && e.target.type.toLowerCase() === 'submit' ) {\n    //       input.name = e.target.name\n    //       input.type = 'hidden'\n    //       input.value = e.target.value\n    //       input.className = 'submit-surrogate'\n\n    //       form.appendChild(input)\n    //     }\n    //   })\n    // }\n  }\n\n  //  Public methods\n  return {\n    // ajaxFormBinding: methods.ajaxFormBinding,\n    collapseQuotes: methods.collapseQuotes,\n    init: methods.init,\n    menu: methods.menu\n  }\n\n}(CF))\n","CF.init = function () {\n  'use strict'\n\n  var body = document.getElementsByTagName('body')[0],\n      controller = body.getAttribute('data-controller'),\n      action = body.getAttribute('data-action'),\n      view = body.getAttribute('data-view')\n\n  CF.global.init()\n\n  if ( CF[controller] ) {\n    CF[controller].init()\n\n    if ( CF[controller][action] && typeof CF[controller][action] === 'function' ) {\n      CF[controller][action]()\n\n      if ( CF[controller][action][view] ) {\n        CF[controller][action][view]()\n      }\n    }\n  }\n}\n\ndocument.onreadystatechange = function () {\n  'use strict'\n\n  if ( document.readyState === 'interactive' ) {\n    CF.init()\n  }\n}\n","CF.members = ( function () {\n  'use strict'\n\n  var methods = {\n\n      init: function () {\n        if ( document.body.clientWidth < 720 ) {\n          let currentGroup = document.querySelector('#group-menu li.current a')\n          if ( currentGroup ) {\n            currentGroup.addEventListener('click', function (e) {\n              e.preventDefault()\n              e.target.parentNode.parentNode.classList.toggle('show-menu')\n            })\n          }\n        }\n      }\n\n    }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(CF)\n","CF.post = ( function () {\n  'use strict'\n\n  var methods = {\n\n\t\tinit: function () {\n      CF.global.collapseQuotes()\n\t\t},\n\t\t// If the post controller is fired to send the user directly to a post, run the default topic scripts\n\t\ttopic: function () {\n\t\t\tCF.topic.handler()\n\t\t}\n\n  }\n\n\t//\tPublic methods\n\treturn {\n\t\tinit: methods.init,\n\t\ttopic: methods.topic\n\t}\n\n})(CF)","CF.topic = ( function () {\n  'use strict'\n\n  var actions, methods\n\n\tactions = {\n\n    handler: function () {\n      var form = document.querySelector('#quick-reply-form')\n\n      if ( form && !form.parentNode.classList.contains('quote') ) {\n        methods.postContent()\n      }\n      methods.imageZoom()\n    },\n\n    start: function () {\n      // CF.global.ajaxFormBinding({\n      //   formSelector: '#topic-write-form'\n      // })\n      methods.imageZoom()\n      methods.postContent()\n    },\n\n    startForm: function () {\n      methods.imageZoom()\n    },\n\n    reply: function () {\n      // CF.global.ajaxFormBinding({\n      //   formSelector: '#topic-reply-form'\n      // })\n      var form = document.querySelector('#topic-reply-form')\n\n      if ( form && !form.parentNode.classList.contains('quote') ) {\n        methods.postContent()\n      }\n      methods.imageZoom()\n    },\n\n    replyForm: function () {\n      methods.imageZoom()\n    }\n\n\t}\n\n  methods = {\n\n\t\tinit: function () {\n      CF.global.collapseQuotes()\n    },\n    \n    imageZoom: function () {\n      if ( document.body.clientWidth >= 720 ) {\n        var mask = document.createElement('div')\n        mask.setAttribute('id', 'mask')\n        document.body.appendChild(mask)\n\n        document.querySelectorAll('article.post section.content.post p > img, article.post section.content.post > img').forEach( function (item) {\n          var zoomWrapper = document.createElement('span'),\n              zoomButton = document.createElement('span'),\n              parent = item.parentNode,\n              src = item.getAttribute('src')\n          \n          zoomWrapper.classList.add('zoom')\n          parent.appendChild(zoomWrapper)\n          zoomButton.classList.add('zoom-button')\n          zoomButton.innerHTML = '<svg class=\"icon zoom-in\"><use xlink:href=\"themes/comitium-light/images/symbols.svg#icon-zoom-in\"></use></svg>'\n          zoomWrapper.appendChild(item)\n          zoomWrapper.appendChild(zoomButton)\n\n          zoomWrapper.addEventListener('click', function () {\n            mask.innerHTML = '<div id=\"mask-close\"><svg class=\"icon close\"><use xlink:href=\"themes/comitium-light/images/symbols.svg#icon-close\"></use></svg></div><img src=\"' + src + '\"><a class=\"open-tab\" href=\"' + src + '\" target=\"_blank\">' + src + '<svg class=\"icon arrow-up-right\"><use xlink:href=\"themes/comitium-light/images/symbols.svg#icon-arrow-up-right\"></use></svg></a>'\n            document.querySelector('html').classList.add('mask-enabled')\n            mask.classList.add('enabled')\n\n            window.addEventListener('keydown', escape)\n            mask.querySelector('#mask-close').addEventListener('click', function () {\n              close()\n            })\n\n            function escape(e) {\n              if ( e.key === 'Escape' ) {\n                close()\n              }\n            }\n\n            function close() {\n              document.querySelector('html').classList.remove('mask-enabled')\n              mask.classList.remove('enabled')\n              mask.innerHTML = ''\n              window.removeEventListener('keydown', escape)\n            }\n          })\n        })\n      }\n    },\n\n    postContent: function () {\n      var postContent = document.getElementById('post-content'),\n          postContentText = postContent ? postContent.value : ''\n\n      if ( postContent ) {\n        postContent.addEventListener('focus', function () {\n          if ( postContent.value === postContentText ) {\n            postContent.value = ''\n          }\n        })\n        postContent.addEventListener('blur', function () {\n          if ( postContent.value === '' ) {\n            postContent.value = postContentText\n          }\n        })\n      }\n    }\n\n  }\n\n\t//\tPublic methods\n\treturn {\n\t\tinit: methods.init,\n    handler: actions.handler,\n    start: actions.start,\n    startForm: actions.startForm,\n    // Private topic and announcement actions use the same scripts as default topic actions\n    startPrivate: actions.start,\n    startPrivateForm: actions.startForm,\n    startAnnouncement: actions.start,\n    startAnnouncementForm: actions.startForm,\n    reply: actions.reply,\n    replyForm: actions.replyForm\n\t}\n\n})(CF)\n\n\n// For now, the announcement library is the same as the topic library\nCF.announcement = CF.topic\n","CF.user = ( function () {\n  'use strict'\n\n  var methods = {\n\n      init: function () {\n        CF.global.collapseQuotes()\n      }\n\n    }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(CF)\n"]}