header
  include ../partials/breadcrumbs
  if page === 1
    include ../partials/topic-summary-first-page
  else
    include ../partials/topic-summary

if topic.lockedByID
  section.notice.locked
    <svg class="icon lock"><use xlink:href="themes/default/images/symbols.svg#icon-lock"></use></svg>
    if !session.moderateDiscussions
      p This topic has been locked by a moderator.
    else
      p This topic is locked, but as a moderator, you can still reply and make edits.
    if topic.lockReason
      p.why Why was this topic locked?
      p.reason !{topic.lockReason}

section.posts
  each post in firstPost
    include ../post/_topic-post
  nav
    h2 #{topic.repliesFormatted} Repl#{ topic.replies === 1 ? "y" : "ies" }
    include ../partials/pagination
    include ../partials/topic-actions
  each post in posts
    include ../post/_topic-post

include ../partials/previous-and-next

if userCanReply
  section.form.post.quick-reply
    h2 Quick reply
    form#quick-reply-form(action="topic/id/" + url.id + "/action/replyForm" method="post" novalidate)
      ul.data
        li.post-content.textarea.required
          label(for="post-content")
            | Post content
          textarea(id="post-content" name="content" rows="20" required) #{config.comitium.editorIntro}
        li.subscribe.checkbox
          input(id="subscribe" name="subscribe" type="checkbox" value="true")
          label(for="subscribe")
            | Notify me when someone replies

      ul.actions
        li.secondary.preview
          input(name="formAction" type="submit" value="Preview post")
        li.primary.reply
          input(name="formAction" type="submit" value="Submit your reply")
        //- li.tertiary.draft
        //-   input(name="formAction" type="submit" value="Save as draft")
